(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{3941:(e,t,a)=>{"use strict";a.d(t,{N:()=>s});let s=(0,a(1993).UU)("https://iohyiycjclqjxfhhewel.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlvaHlpeWNqY2xxanhmaGhld2VsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA1Mzk1OTEsImV4cCI6MjA3NjExNTU5MX0.mZjN4Q_0mjmNDDKe5rbzM8Ef-ThVEMQ5h9mC6oIziO8")},5657:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(5155),r=a(2115),l=a(3941);function o(){let[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)(!1),[n,d]=(0,r.useState)(!1),[c,i]=(0,r.useState)({code:"",name:"",clientName:"",budgetHours:"",budgetValue:""});(0,r.useEffect)(()=>{m()},[]);let m=async()=>{try{let{data:e,error:a}=await l.N.from("projects").select("*").order("created_at",{ascending:!1});if(a)throw a;t(e||[])}catch(e){console.error("Erro ao carregar projetos:",e),alert("Erro ao carregar projetos")}},u=async a=>{a.preventDefault(),d(!0);try{let a={code:c.code,name:c.name,client_name:c.clientName||null,budget_hours:c.budgetHours?parseFloat(c.budgetHours):null,budget_value:c.budgetValue?parseFloat(c.budgetValue):null},{data:s,error:r}=await l.N.from("projects").insert([a]).select();if(r)throw r;t([s[0],...e]),i({code:"",name:"",clientName:"",budgetHours:"",budgetValue:""}),o(!1)}catch(e){console.error("Erro ao criar projeto:",e),alert("Erro ao criar projeto")}finally{d(!1)}},x=e=>{i({...c,[e.target.name]:e.target.value})};return(0,s.jsxs)("div",{className:"container mx-auto p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Projetos PremiumBravo"}),(0,s.jsx)("button",{onClick:()=>o(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600",children:"+ Novo Projeto"})]}),a&&(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Cadastrar Novo Projeto"}),(0,s.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C\xf3digo (4 n\xfameros) *"}),(0,s.jsx)("input",{type:"text",name:"code",value:c.code,onChange:x,pattern:"\\d{4}",maxLength:4,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 1234"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Projeto *"}),(0,s.jsx)("input",{type:"text",name:"name",value:c.name,onChange:x,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Auditoria Cont\xe1bil 2024"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),(0,s.jsx)("input",{type:"text",name:"clientName",value:c.clientName,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome do cliente"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Horas Previstas"}),(0,s.jsx)("input",{type:"number",name:"budgetHours",value:c.budgetHours,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 160"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor Total (R$)"}),(0,s.jsx)("input",{type:"number",name:"budgetValue",value:c.budgetValue,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 25000"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,s.jsx)("button",{type:"submit",disabled:n,className:"bg-green-500 text-white px-6 py-2 rounded-md hover:bg-green-600 disabled:opacity-50",children:n?"Salvando...":"Salvar Projeto"}),(0,s.jsx)("button",{type:"button",onClick:()=>o(!1),className:"bg-gray-500 text-white px-6 py-2 rounded-md hover:bg-gray-600",children:"Cancelar"})]})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"C\xf3digo"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Projeto"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Horas"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Valor"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),(0,s.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 font-mono text-sm text-gray-900",children:e.code}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.client_name||"-"}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.budget_hours?"".concat(e.budget_hours,"h"):"-"}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.budget_value?"R$ ".concat(e.budget_value.toLocaleString("pt-BR",{minimumFractionDigits:2})):"-"}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:e.status})})]},e.id)),0===e.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center text-sm text-gray-500",children:"Nenhum projeto cadastrado ainda"})})]})]})})]})}},5909:(e,t,a)=>{Promise.resolve().then(a.bind(a,5657))}},e=>{e.O(0,[993,441,255,358],()=>e(e.s=5909)),_N_E=e.O()}]);